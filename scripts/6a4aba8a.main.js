$(function(){"use strict";function a(a){i&&(i.src=a,i.play())}function b(){$("#btnstart, #btnagain").on("click",function(){j=0,c(),$(".banner").hide()})}function c(){var b,c={x:k.width()/2,y:(k.height()-l.height())/2},d=$("#flower1"),f=d.width(),h=d.height(),i=Math.max(f,h)/2,j=i/Math.sin(Math.PI/o),p=[],q=Math.PI/2,s=2*Math.PI/o;for(b=0;o>b;b++)p[b]=q,q+=s;var t,u,v;for(b=0;50>b;b++)t=Math.floor(Math.random()*o),u=Math.floor(Math.random()*o),v=p[u],p[u]=p[t],p[t]=v;m.addClass("draggable").on("click",function(){a(r)}).each(function(a){var b={top:c.y-Math.sin(p[a])*j-h/2+"px",left:c.x+Math.cos(p[a])*j-f/2+"px"};$(this).css(b).data("origPos",b)}),m.css("visibility","visible"),n.css("visibility","hidden"),$("#btnagain").css("visibility","hidden"),e(d,g)}function d(){var a,b=l.height()/2,c=$("#ladybug1"),d=c.width(),f=c.height(),g=[],i=k.width()/p,j=i/2;for(a=0;p>a;a++)g[a]=j,j+=i;var m,o,q;for(a=0;50>a;a++)m=Math.floor(Math.random()*p),o=Math.floor(Math.random()*p),q=g[o],g[o]=g[m],g[m]=q;n.addClass("draggable").each(function(a){var c={top:b-f/2+"px",left:g[a]-d/2+"px"};$(this).css(c).data("origPos",c),e($(this),h)}),n.css("visibility","visible")}function e(b,c){var d;b.off("click"),b.on("click",function(e){var f,g;if(b!==d){f=e.pageX,g=e.pageY,b.addClass("active"),d=b,e.stopPropagation();var h=b.attr("id"),i=h.replace(/[^\d]*/,"");a(h.indexOf("flower")>-1?t.replace("_",i):u),k.on("mousemove",function(a){var c=b.position();b.css({top:c.top+a.pageY-g+"px",left:c.left+a.pageX-f+"px"}),f=a.pageX,g=a.pageY}),k.on("click",function(){d=null,b.removeClass("active"),k.off("mousemove"),k.off("click"),c&&c(b)})}})}function f(a){a.removeClass("draggable"),a.off("click")}function g(b){var c=+b.attr("id").replace(/[^\d]*/,""),h=$("#target"+c),i=h.offset(),j=b.position(),k=j.left+b.width()/2,l=j.top+b.height()/2;i.right=i.left+h.width(),i.bottom=i.top+h.height(),k>=i.left&&k<=i.right&&l>=i.top&&l<=i.bottom?(f(b),b.css({top:(i.bottom+i.top)/2-b.height()/2+"px",left:(i.right+i.left)/2-b.width()/2+"px"}),o>c?(a(q),e($("#flower"+(c+1)),g)):(a(s),d())):(a(r),b.css(b.data("origPos")))}function h(b){var c=+b.attr("id").replace(/[^\d]*/,""),d=$("#flower"+c),e=d.position(),g=b.position(),h=g.left+b.width()/2,i=g.top+b.height()/2;e.right=e.left+d.width(),e.bottom=e.top+d.height(),h>=e.left&&h<=e.right&&i>=e.top&&i<=e.bottom?(f(b),b.css({top:(e.bottom+e.top)/2-b.height()/2+"px",left:(e.right+e.left)/2-b.width()/2+"px"}),j++,p>j?a(q):(a(s),$("#btnagain").css("visibility","visible"))):(a(r),b.css(b.data("origPos")))}var i,j,k=$(window),l=$(".targets"),m=$(".flower"),n=$(".ladybug"),o=m.size(),p=n.size(),q="sound/bonus.wav",r="sound/crash.wav",s="sound/good.ogg",t="sound/U003_.ogg",u="sound/level.wav";Audio&&(i=new Audio),b()});